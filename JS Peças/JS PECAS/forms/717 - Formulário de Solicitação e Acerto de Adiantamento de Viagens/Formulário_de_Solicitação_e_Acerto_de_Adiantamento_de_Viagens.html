<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html;" />
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="description" content="Formulário para Adiantamento - JS" />
<meta name="author" content="Jamys Sousa" />

<title></title>
<!-- vcXMLRPC -->
<script type="text/javascript" src="../vcXMLRPC.js"></script>
<script type="text/javascript" src="../vcXMLRPC-mobile.js"></script>

<!-- Fluig Style -->
<link rel="stylesheet" type="text/css" href="/portal/resources/style-guide/css/fluig-style-guide.min.css" />
<link rel="stylesheet" type="text/css" href="http://style.fluig.com/css/fluig-style-guide.min.css" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="/portal/resources/style-guide/js/fluig-style-guide.min.js"></script>
<script src="http://style.fluig.com/js/fluig-style-guide.min.js"></script>

<style type="text/css">
	.fluig-style-guide {
		color: black !important;
	}
</style>

</head>

<body>
	<div class="fluig-style-guide">
		<!-- Container -->
		<div class="page-content container-fluid">
			<div class="row">
				<!-- Header Form -->
				<div class="col-md-12 col-xs-12">
					<div class="page-header">
						<div class="row">
							<div class="col-md-8 col-xs-8">
								<h1 class="fs-no-margin fs-ellipsis fs-full-width">Solicitação e
						Acerto de Adiantamento de Viagens</h1>
							</div>
							<div class="col-md-4 col-xs-4">
								<div class="pull-right">
									<img src="http://jspecas.com.br/img/logo.png" width="85px"
										height="80px" />
								</div>
							</div>
						</div>
					</div>
					<div class="paragraph-is-required system-message-information alert alert-info" role="alert">Todos os campos com * são de preenchimento obrigatório.</div>
				</div>
				<!-- Body Form -->

				<div class="col-md-12 col-xs-12">
				<form class="totvs-form grid vertical create-form-components ui-sortable t0" name="createFormComponents" style="padding-left: 10px; padding-right: 10px;">

				<div class="form-field" data-type="number" data-show-properties="" data-field-name="num_solicitao">
					<div class="col-sm-2 col-xs-12">
						<div class="form-group">
							<label>Número da Solicitação</label>
							<input type="text" class="form-control" name="num_solicitao" value=""
							data-size="small" data-only-numbers="" analytics="true" gooddataid="1">
						</div>
					</div>
				</div>

				<div class="form-field" data-type="textbox" data-show-properties="" data-field-name="dataSolicitacao">
					<div class="col-sm-6 col-xs-12">
						<div class="form-group">
							<label>Nome do Solicitante</label>
							<span class="required text-danger"><strong> *</strong></span>
							<input type="text" class="form-control" name="nm_solicitante" value=""
							placeholder="Nome Completo" data-size="medium" required="required">
						</div>
					</div>
				</div>

				<div class="form-field" data-type="textbox" data-show-properties="" data-field-name="dataSolicitacao">
					<div class="col-sm-4 col-xs-12">
						<div class="form-group">
							<label>CPF do Solicitante</label>
							<span class="required text-danger"><strong> *</strong></span>
							<input type="text" class="form-control" name="num_cpf_Solicit" value="" placeholder="" data-size="small" mask="000.000.000-00" maxlength="14" data-only-numbers="true" required="required">
						</div>
					</div>
				</div>

				<div class="col-sm-4 col-xs-12">
				<input type="hidden" name="idEmpresa" id="idEmpresa"
					value="" />
				<div class="form-field" data-type="zoomfield"
					data-show-properties="" data-field-name="li_empresa">
					<label for="li_empresa" class="control-label">Empresa </label><span class="required text-danger"><strong>*</strong></span>
					<input type="zoom" name="li_empresa" id="li_empresa"
						data-zoom="{
									'displayKey':'NOME',
									'datasetId':'dsEmpresaPadrao',
									'fields':[
										{'field':'ID_EMPRESA','label':'ID'},
										{'field':'NOME','label':'Empresa','standard':'true','search':'true'}
									]}"
						class="form-control" value="" placeholder="" data-size="small" required="required"/>
				</div>
			  </div>

				<div class="form-field" data-type="combo" data-show-properties=""
					data-field-name="li_area"
					style="position: relative; left: 0px; top: 0px;">
					<div class="col-sm-4 col-xs-12">
						<div class="form-group">
							<label>Area</label><span class="required text-danger"><strong> *</strong></span><select
								class="form-control" name="li_area" required="required"><option
									value="Administrativo">Administrativo</option>
								<option value="Auditoria">Auditoria</option>
								<option value="Comercial">Comercial</option>
								<option value="Compras">Compras</option>
								<option value="Controladoria">Controladoria</option>
								<option value="Crédito Cobrança">Crédito Cobrança</option>
								<option value="DHO">DHO</option>
								<option value="Financeiro">Financeiro</option>
								<option value="Logistica">Logistica</option>
								<option value="TI">TI</option>
								<option value="Marketing">Marketing</option></select>
						</div>
					</div>
				</div>

				<div class="form-field" data-type="combo" data-show-properties=""
					data-field-name="mot_viagem"
					style="position: relative; left: 0px; top: 0px;">
					<div class="col-sm-4 col-xs-12">
						<div class="form-group">
							<label>Motivo da Viagem</label><span class="required text-danger"><strong> *</strong></span><select
								class="form-control" name="mot_viagem" required="required"><option
									value="Treinamento e Capacitação">Treinamento e
									Capacitação</option>
								<option value="Visita Técnica">Visita Técnica</option>
								<option value="Auditoria">Auditoria</option>
								<option value="Implantação">Implantação</option>
								<option value="Outros">Outros</option></select>
						</div>
					</div>
				</div>

				<div class="form-field" data-type="textbox" data-show-properties="" data-field-name="loc_origem">
				<div class="col-sm-4 col-xs-12">
					<div class="form-group">
						<label>Local de Origem</label><span class="required text-danger"><strong> *</strong></span><input
							type="text" class="form-control" name="loc_origem" value=""
							placeholder="Cidade/Loja" data-size="medium" required="required">
					</div>
				    </div>
				</div>

				<div class="form-field" data-type="textbox" data-show-properties=""
					data-field-name="loc_destino"
					style="position: relative; left: 0px; top: 0px;">
					<div class="col-sm-4 col-xs-12">
						<div class="form-group">
							<label>Local Destino</label>
							<span class="required text-danger"><strong> *</strong></span>
							<input type="text" class="form-control" name="loc_destino" value="" placeholder="Cidade/Loja" data-size="medium" required="required">
						</div>
					</div>
				</div>

				<div class="form-field" data-type="date" data-show-properties=""
					data-field-name="dat_saida">
					<div class="col-sm-2 col-xs-12">
						<div class="form-group">
							<label>Data de Saída</label>
							<span class="required text-danger"><strong> *</strong></span>
							<input id="date9" type="text" class="form-control" name="dat_saida" data-date="" required="required">
						</div>
					</div>
				</div>

				<div class="form-field" data-type="date" data-show-properties=""
					data-field-name="dat_retorno">
					<div class="col-sm-2 col-xs-12">
						<div class="form-group">
							<label>Data de Retorno</label>
							<span class="required text-danger"><strong> *</strong></span>
							<input id="date21" type="text" class="form-control" name="dat_retorno" data-date="" required="required">
						</div>
					</div>
				</div>

				<div class="form-field" data-type="tabledetail"
					data-show-properties="" data-field-name="Dados_Banc_rio"
					style="position: relative; left: 0px; top: 0px;">
					<div class="col-sm-12 col-xs-12">
						<div class="form-group">
							<label>Dados Bancário</label>
							<table tablename="tabledetailname2" class="table"
								noaddbutton="true">
								<thead>
									<tr class="tableHeadRow">
										<th class="tableColumn">Nº Banco</th>
										<th class="tableColumn">Nº Agência Bancária</th>
										<th class="tableColumn">Conta Corrente</th>
									</tr>
								</thead>
								<tbody>
									<tr class="tableBodyRow">
										<td class="fs-v-align-middle"><div class="form-input">
												<input type="text" name="column1_2" class="form-control">
											</div></td>
										<td class="fs-v-align-middle"><div class="form-input">
												<input type="text" name="column2_2" class="form-control">
											</div></td>
										<td class="fs-v-align-middle"><div class="form-input">
												<input type="text" name="column3_2" class="form-control">
											</div></td>
									</tr>
								</tbody>
							</table>
							<button type="button" class="btn btn-primary"
								onclick="wdkAddChild('tabledetailname2')">Incluir</button>
						</div>
					</div>
				</div>

				<div class="form-field" data-type="textbox" data-show-properties=""
					data-field-name="vr_pro_deslo"
					style="position: relative; left: 0px; top: 0px;">
					<div class="col-sm-4 col-xs-12">
						<div class="form-group">
							<label>Despesas com Taxi/Deslocamento</label>
							<input type="text" class="form-control cal_val" id="vr_pro_deslos" name="vr_pro_deslo" value="" placeholder="Valor a ser Gasto" data-size="small" maxlength="22" data-only-numbers="true">
						</div>
					</div>
				</div>

				<div class="form-field" data-type="textbox" data-show-properties=""
					data-field-name="vr_pro_alimen"
					style="position: relative; left: 0px; top: 0px;">
					<div class="col-sm-4 col-xs-12">
						<div class="form-group">
							<label>Despesas com Alimentação</label>
							<input type="text" class="form-control cal_val" id="vr_pro_alimen" name="vr_pro_alimen" value="" placeholder="Valor a ser Gasto" data-size="small" maxlength="22" data-only-numbers="true">
						</div>
					</div>
				</div>

				<div class="form-field" data-type="textbox" data-show-properties=""
					data-field-name="vr_pro_gerais"
					style="position: relative; left: 0px; top: 0px;">
					<div class="col-sm-2 col-xs-12">
						<div class="form-group">
							<label>Despesas - Outros</label>
							<input type="text" class="form-control cal_val" name="vr_pro_gerais" id="vr_pro_gerais" value="" placeholder="Valor a ser Gasto" data-size="small" maxlength="22" data-only-numbers="true">
						</div>
					</div>
				</div>

				<div class="form-field" data-type="number" data-show-properties=""
					data-field-name="vr_pro_total"
					style="position: relative; left: 0px; top: 0px;">
					<div class="col-sm-2 col-xs-12">
						<div class="form-group">
							<label>Valor Total Solicitado</label>
							<input type="text" class="form-control ap_total" id="vr_pro_total_sol" name="vr_pro_total" value="" placeholder="" data-size="small" data-only-numbers="" analytics="true" gooddataid="2">
						</div>
					</div>
				</div>

				<div class="form-field" data-type="number" data-show-properties=""
					data-field-name="num_solic_orca"
					style="position: relative; left: 0px; top: 0px;">
					<div class="col-sm-4 col-xs-12">
						<div class="form-group">
							<label>Número da Solicitação Orçamentaria</label>
							<input type="text" class="form-control" name="num_solic_orca" value="" placeholder="Nº Solicitação Orçamentaria" data-size="small" data-only-numbers="">
						</div>
					</div>
				</div>

				<div class="form-field" data-type="checkbox" data-show-properties=""
					data-field-name="dep_realizado"
					style="position: relative; left: 0px; top: 0px;">
					<div class="col-sm-4 col-xs-12">
						<div class="form-group">
							<label>Deposito Realizado</label>
							<div class="check-options">
								<div class="checkbox">
									<label><input type="checkbox" name="checkbox15opc0"
										value="Sim">Sim</label>
								</div>
							</div>
						</div>
					</div>
				</div>

				<div class="form-field" data-type="textbox" data-show-properties=""
					data-field-name="vr_rea_deslo"
					style="position: relative; left: 0px; top: 0px;">
					<div class="col-sm-4 col-xs-12">
						<div class="form-group">
							<label>Despesas Realizadas com Taxi/Deslocamento</label><input
								type="text" class="form-control" name="vr_rea_deslo" value=""
								placeholder="Valor Conforme Comprovantes" data-size="small"
								mask="#00.000.000.000.000,00" maxlength="22"
								data-only-numbers="true">
						</div>
					</div>
				</div>

				<div class="form-field" data-type="textbox" data-show-properties=""
					data-field-name="vr_rea_alimen"
					style="position: relative; left: 0px; top: 0px;">
					<div class="col-sm-4 col-xs-12">
						<div class="form-group">
							<label>Despesas Realizadas com Alimentação</label><input
								type="text" class="form-control" name="vr_rea_alimen" value=""
								placeholder="Valor Conforme Comprovantes" data-size="small"
								mask="#00.000.000.000.000,00" maxlength="22"
								data-only-numbers="true">
						</div>
					</div>
				</div>

				<div class="form-field" data-type="textbox" data-show-properties=""
					data-field-name="vr_rea_gerais"
					style="position: relative; left: 0px; top: 0px;">
					<div class="col-sm-4 col-xs-12">
						<div class="form-group">
							<label>Despesas Realizadas - Outros</label>
							<input type="text" class="form-control" name="vr_rea_gerais" value="" placeholder="Preencher Conforme Comprovantes" data-size="small" mask="#00.000.000.000.000,00" maxlength="22"
							data-only-numbers="true">
						</div>
					</div>
				</div>

				<div class="form-field" data-type="number" data-show-properties=""
					data-field-name="vr_rea_total">
					<div class="col-sm-4 col-xs-12">
						<div class="form-group">
							<label>Valor Total Realizado</label><input type="number"
								class="form-control" name="vr_rea_total" value="" placeholder=""
								data-size="small" data-only-numbers="">
						</div>
					</div>
				</div>

				<div class="form-field" data-type="number" data-show-properties=""
					data-field-name="vr_acer_total"
					style="position: relative; left: 0px; top: 0px;">
					<div class="col-sm-4 col-xs-12">
						<div class="form-group">
							<label>Saldo do Adiantamento para Acerto</label><input
								type="number" class="form-control" name="vr_acer_total" value=""
								placeholder="" data-size="small" data-only-numbers="">
						</div>
					</div>
				</div>
			</form>
		</div>
	</div>
		</div>
	</div>

	<script src="http://fluig.jspecas.com.br/portal/resources/js/jquery/jquery.js" type="text/javascript"></script>
	<script src="http://fluig.jspecas.com.br/portal/resources/js/jquery/jquery-ui.min.js"type="text/javascript"></script>
	<script src="http://fluig.jspecas.com.br/portal/resources/components/placeholder/plugin-placeholder.js" type="text/javascript"></script>
	<script src="http://fluig.jspecas.com.br/portal/resources/components/ratingstar/plugin-rating.js" type="text/javascript"></script>
	<script src="http://fluig.jspecas.com.br/ecm_resources/resources/assets/forms/forms.js" type="text/javascript"></script>
	<script src="assets/js/dadSon.js" type="text/javascript"></script>
	<script src="assets/js/zoom.js" type="text/javascript"></script>
	<script src="assets/js/date.js" type="text/javascript"></script>
	<script src="assets/js/active.js" type="text/javascript"></script>
	<script src="assets/js/classificacao.js" type="text/javascript"></script>

	<script type="text/javascript">
		var keyDown = false, ctrl = 17, vKey = 86, Vkey = 118;

		$(document).keydown(function(e) {
			if (e.keyCode == ctrl)
				keyDown = true;
		}).keyup(function(e) {
			if (e.keyCode == ctrl)
				keyDown = false;
		});

		$('[data-only-numbers]').on('keypress', function(e) {
			if (!e) {
				var e = window.event;
			}

			if (e.keyCode > 0 && e.which == 0) {
				return true;
			}

			if (e.keyCode) {
				code = e.keyCode;
			} else if (e.which) {
				code = e.which;
			}

			if (code == 46) {
				return true;
			}

			var character = String.fromCharCode(code);
			if (character == '\b' || character == ' ' || character == '\t') {
				return true;
			}
			if (keyDown && (code == vKey || code == Vkey)) {
				return (character);
			} else {
				return (/[0-9]$/.test(character));
			}
		}).on('focusout', function(e) {
			var $this = $(this);
			if ($this.val() == "") {
				return true;
			}
			$this.val($this.val().replace(/[^0-9\.]/g, ''));
		}).on('paste', function(e) {
			var $this = $(this);
			setTimeout(function() {
				$this.val($this.val().replace(/[^0-9\.]/g, ''));
			}, 5);
		});

		$('.create-form-components')
				.on(
						'keyup',
						'input[required="required"][type="text"], input[required="required"][type="number"], input[required="required"][type="date"], textarea[required="required"]',
						function() {
							validationFieldsForm($(this), $(this).parents(
									'.form-field').data('type'));
						});

		$('.create-form-components')
				.on(
						'change',
						'input[required="required"][type="checkbox"], input[required="required"][type="radio"], select[required="required"]',
						function() {
							validationFieldsForm($(this), $(this).parents(
									'.form-field').data('type'));
						});

		function validationFieldsForm(field, type) {
			if (type === "checkbox" || type === "radio") {
				if (!field.is(':checked')) {
					field.parents('.form-field').addClass('required');
				} else {
					field.parents('.form-field').removeClass('required');
				}
			} else {
				if (!field.val().trim()) {
					field.parents('.form-field').addClass('required');
				} else {
					field.parents('.form-field').removeClass('required');
				}
			}
		}

		var $zoomPreview = $(".zoom-preview");
		if ($zoomPreview.length) {
			$zoomPreview.parent().removeClass("input-group");
			$zoomPreview.remove();
		}

		var ratings = $(".rating");
		if (ratings.length > 0)
			ratingStars(ratings);
		function ratingStars(stars) {
			$.each(stars, function(i, obj) {
				var field = $(this).closest(".form-group")
						.find(".rating-value");
				var tgt = $(obj);
				tgt.html("");
				var rating = FLUIGC.stars(tgt, {
					value : field.val()
				});
				rating.on("click", function(o) {
					field.val($(this).index() + 1);
				});
			});
		}

		$.each($("[data-date]"), function(i, o) {
			var id = $(o).attr("id");
			FLUIGC.calendar("#" + id);
		});

		$(document).ready(function() {
			$.each($("[data-date]"), function(i, o) {
				var id = $(o).attr("id");
				if ($("#" + id).attr("readonly")) {
					$("#" + id).data('DateTimePicker').disable();
				}
			});

			var deslo = 0;
			var alim = 0;
			var gerais = 0;

			$('#vr_pro_deslos').blur(function() {
				deslo = $(this).val().replace(",",".");
				total(deslo, alim, gerais);
			});

			$('#vr_pro_alimen').blur(function() {
				alim = $(this).val().replace(",", ".");
				total(deslo, alim, gerais);
			});

			$('#vr_pro_gerais').blur(function() {
				gerais = $(this).val().replace(",", ".");
				total(deslo, alim, gerais);
			});

			$('#vr_pro_total_sol').prop('readonly', true);
			function total(deslo, alim, gerais) {
				if(deslo == "") deslo = 0;
				if(alim == "") alim = 0;
				if(gerais == "") gerais = 0;
				$('#vr_pro_total_sol').val(parseFloat(deslo) + parseFloat(alim) + parseFloat(gerais));
			}
		});

	</script>
</body>
</html>
